spring:
  config:
    # Load overrides from a .env file if present; matches Spring's relaxed binding.
    import: optional:file:.env[.properties]

  application:
    name: spring7-reactive

  # Reactive access to Yugabyte via R2DBC
  r2dbc:
    url: r2dbc:postgresql://127.0.0.1:5433/yugabyte?sslmode=disable
    username: yugabyte
    password: yugabyte
    pool:
      enabled: true
      max-size: 10
      max-idle-time: 10s
      max-life-time: 20s
      validation-query: SELECT 1;

  # JDBC DataSource for Liquibase (and any future JDBC tooling)
  datasource:
    url: jdbc:postgresql://127.0.0.1:5433/yugabyte?sslmode=disable
    username: yugabyte
    password: yugabyte
    hikari:
      maximumPoolSize: 1
      minimumIdle: 0
      maxLifetime: 30000  # 30s (Hikari enforces a minimum of 30s)
      idleTimeout: 10000  # 10s
      validationTimeout: 5000

  liquibase:
    enabled: true
    change-log: classpath:db/changelog/db.changelog-master.yaml

  sql:
    init:
      mode: never

app:
  fx:
    # Source this from .env (FX_ACCESS_KEY) or pass with -DFX_ACCESS_KEY=...
    access-key: ${FX_ACCESS_KEY:}
