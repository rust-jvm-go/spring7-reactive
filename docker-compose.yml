services:
  yugabytedb:
    image: yugabytedb/yugabyte:latest
    container_name: yugabytedb
    command: ["bin/yugabyted", "start", "--base_dir=/home/yugabyte/yb-data", "--daemon=false"]
    ports:
      - "7000:7000"   # YB-Master admin UI
      - "9000:9000"   # YB-TServer admin UI
      - "5433:5433"   # YSQL (PostgreSQL-compatible)
      - "9042:9042"   # YCQL (not used now, but exposed for completeness)
    volumes:
      - yugabytedb-data:/home/userone/localdev/data/docker/yugabyte/yb-data
    healthcheck:
      test: ["CMD", "bash", "-c", "pg_isready -h 127.0.0.1 -p 5433 -U yugabyte || exit 1"]
      interval: 10s
      timeout: 5s
      retries: 10

volumes:
  yugabytedb-data:
    driver: local
